# Computer&Network 

## 端口

| FTP             | 21   |
| --------------- | ---- |
| HTTP            | 80   |
| Telnat 远程登录 | 23   |
| QQ              | 1080 |
| HTTPS           | 443  |

## TCP

### TCP的报文格式

![](img/net/1.jpg)

* 这里的源端口和目的端口可以保证数据要发送到哪个应用
* 序号，序号可以用来解决包是否乱序的问题
* 确认序号，保证不丢包，发送给你了，我怎么知道对方收到了包，所以确认序号可以获知对方是否收到了，如果没有收到的话，就重发
* 状态位：
  * SYN 发起一个连接
  * ACK是回复
  * RST是重新连接
  * FIN是结束连接
* 窗口大小，有即流量控制，可以解决拥塞问题，

### TCP三次握手

~~~shell
# A ：您好，我是A  	请求
# B : 您好，我是B	 应答

# A ： 您好，B 		 应答之应答	
~~~

## HTTP

我们回顾一下传统的HTTP服务器的原理 

1、创建一个ServerSocket，监听并绑定一个端口

2、一系列客户端来请求这个端口

3、服务器使用Accept，获得一个来自客户端的Socket连接对象  

4、启动一个新线程处理连接 

* 读Socket，得到字节流

* 解码协议，得到Http请求对象 

* 处理Http请求，得到一个结果，封装成一个HttpResponse对象 

* 编码协议，将结果序列化字节流 写Socket，将字节流发给客户端 

5、继续循环步骤3

HTTP服务器之所以称为HTTP服务器，是因为编码解码协议是HTTP协议，如果协议是Redis协议，那它就成了Redis服务器，如果协议是WebSocket，那它就成了WebSocket服务器，等等。 使用Netty你就可以定制编解码协议，实现自己的特定协议的服务器。







